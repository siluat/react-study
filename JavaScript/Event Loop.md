# Event Loop

## 개요

자바스크립트의 이벤트 루프 동작과 관련된 내용을 정리하는 문서

## Tasks vs Microtasks

MDN 문서에서는 태스트 큐와 마이크로태스크 큐의 차이점에 대해 다음과 같이 설명하고 있다.

- 태스크 큐의 태스크는 이벤트 루프의 새 순환이 시작될 때 하나씩 실행된다. 순환이 시작된 이후에 태스크 큐에 추가된 태스크는 다음 순환이 돌아올 때까지 실행되지 않는다.
- 태스크가 종료되고 실행 스택이 비어있는 상태가 되면, 마이크로 태스크 큐에 있는 마이크로 태스크들이 실행된다. 마이크로 태스크 큐가 빈 상태가 될 때까지 마이크로 태스크들을 차례대로 실행된다. 중간에 새 마이크로 태스크가 추가되도 마찬가지이다. 즉, 마이크로 태스트는 새 마이크로 태스크들을 마이크로 태스크 큐에 추가할 수 있고 새로 추가된 마이크로 태스크들은 다음 이벤트 루프 순환이 시작되기 전인, 현재 이벤트 루프가 끝나기 전에 모두 실행이 된다.

쉽게 생각했을 때, 결국 태스크 큐와 마이크로태스크 큐는 우선순위 큐처럼 동작하며, 마이크로 태스크 큐가 더 높은 우선순위를 가진다고 생각해도 무방하지 않을까 싶다.

> [In depth: Microtasks and the JavaScript runtime environment](https://developer.mozilla.org/en-US/docs/Web/API/HTML_DOM_API/Microtask_guide/In_depth)